<div class="loading-fullscreen" *ngIf="geneLoading" [@fadeInOut]>
  Loading ...
</div>

<mat-sidenav-container>
  <mat-sidenav #sidenav class="sidenav" mode="side" position="end" opened disableClose
    [ngClass]="{ 'opened': sidenavOpened, 'closed': !sidenavOpened }"
  >
    <app-sidenav
      [variant]="variantString"
      [gene]="gene"
      (change)="toggleSidenav($event)"
    ></app-sidenav>
  </mat-sidenav>

  <mat-sidenav-content id="human-result-container"
    [ngClass]="{ 'sidenav-opened': sidenavOpened, 'sidenav-closed': !sidenavOpened }"
  >
    <div id="TOP"></div>
    <app-navbar showSearch="true" showMenuButton="true"></app-navbar>

    <div *ngIf="gene !== null || variant" class="container-fluid py-5 px-md-5">

      <!-- Gene, Input information starts -->
      <div class="row">
        <div class="col-12">
          <div class="title" *ngIf="!proteinInput">
            <h1 *ngIf="geneEntrezId && gene">{{ gene.symbol }}</h1>
            <h1 *ngIf="geneEntrezId && variant">&nbsp;/&nbsp;</h1>
            <h1 *ngIf="variant">{{ variantString }}</h1>
            <h1 *ngIf="variantInput && variantInput.indexOf(':c.') != -1">&nbsp;({{ variantInput }})</h1>
          </div>

          <div class="title" *ngIf="proteinInput">
            <h1 class="d-block">{{ proteinInput }}</h1>
            <h4 class="d-inline-block" style="font-weight: 300; font-size: 0.95em;" *ngIf="gene" [@fadeInOut]>
              <span class="label">Gene</span>{{ gene.symbol }}
            </h4>
            <h4 class="d-inline-block ml-3" style="font-weight: 300; font-size: 0.95em;" *ngIf="variant" [@fadeInOut]>
              <span class="label">Variant</span>{{ variantString }}
            </h4>
          </div>
        </div>

        <div class="col-12 mt-3" *ngIf="geneCandidates && geneCandidates.length">
          <mat-form-field style="margin-bottom: -1.25em">
            <mat-label>Genes contain Chr{{ variant.chr }}:{{ variant.pos }}</mat-label>
            <mat-select [value]="gene" (selectionChange)="onGeneSelectionChange($event)">
              <mat-option *ngFor="let aGene of geneCandidates" [value]="aGene">
                {{ aGene.symbol }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-12 subtitle mt-3" *ngIf="gene" [@toggle]>
          <a class="d-inline mr-3" target="_blank" [attr.href]="'https://www.genenames.org/data/gene-symbol-report/#!/hgnc_id/HGNC:' + gene.hgncId" *ngIf="gene.hgncId">
            <button mat-flat-button color="primary">
              <mat-icon class="mr-1 icon-18px">open_in_new</mat-icon>
              HGNC
            </button>
          </a>

          <a class="d-inline mr-3" target="_blank" [attr.href]="'https://www.ncbi.nlm.nih.gov/gene/' + gene.entrezId">
            <button mat-flat-button color="primary">
              <mat-icon class="mr-1 icon-18px">open_in_new</mat-icon>
              NCBI Gene
            </button>
          </a>

          <a class="d-inline mr-3" target="_blank" [attr.href]="'https://mygene2.org/MyGene2/variantsbygene?gene=' + gene.symbol">
            <button mat-flat-button color="primary">
              <mat-icon class="mr-1 icon-18px">open_in_new</mat-icon>
              MyGene2
            </button>
          </a>
        </div>

        <div class="col-12 subtitle mt-3" *ngIf="gene" [@toggle]>
          <h4>
            <span class="label">Name</span>
            {{ gene.name }}
          </h4>
          <h4 *ngIf="gene['alias']" [@toggle]>
            <span class="label">Aliases</span>
            {{ gene.alias.join(', ') }}
          </h4>
        </div>

        <div class="col-12 mt-3" *ngIf="gene && gene.entrezSummary" [@toggle]>
          <h4 class="m-0 title">Entrez Summary of {{ gene.symbol }}</h4>
          <p class="mt-3 mb-0">{{ gene.entrezSummary }} </p>
        </div>

      </div>
      <!-- Gene, Input information ends -->

      <!-- OMIM starts -->
      <div class="row section mt-5" id="OMIM" *ngIf="geneLoading || gene" [@toggle]>
        <div class="col-12" [ngClass]="{ 'skeleton': omimLoading }">
          <h2 class="mb-1 text-uppercase">Disease Data</h2>
          <app-omim *ngIf="gene" [gene]="gene" [loading]="omimLoading" [data]="omimData"></app-omim>
        </div>
      </div>
      <!-- OMIM ends -->

      <!-- dbNSFP starts -->
      <div class="row section mt-5" id="DbNSFP" *ngIf="variant" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Disease Data</h2>
          <app-dbnsfp [variant]="variant"></app-dbnsfp>
        </div>
      </div>
      <!-- dbNSFP ends -->

      <!-- ClinVar starts -->
      <div class="row section mt-5" id="ClinVar" *ngIf="!geneLoading && gene" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Disease Data</h2>
          <app-clinvar [gene]="gene"></app-clinvar>
        </div>
      </div>
      <!-- ClinVar ends -->

      <!-- Geno2MP starts -->
      <div class="row section mt-5" id="Geno2MP" *ngIf="!geneLoading" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Disease Data</h2>
          <app-geno2mp [gene]="gene" [variant]="variant"></app-geno2mp>
        </div>
      </div>
      <!-- Geno2MP ends -->

      <!-- DECIPHER starts -->
      <div class="row section mt-5" id="DECIPHER" *ngIf="!geneLoading" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Disease Data</h2>
          <app-decipher-disease [gene]="gene" [variant]="variant"></app-decipher-disease>
        </div>
      </div>
      <!-- DECIPHER ends -->

      <mat-divider class="mt-5"></mat-divider>

      <!-- gnomAD starts -->
      <div class="row section mt-5" id="GnomAD">
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Control Data</h2>

          <h3 class="mb-0 d-inline-block align-middle">gnomAD</h3>
          <a class="mb-0 d-inline-block ml-3 align-middle"
            *ngIf="gene && gene.xref && gene.xref.ensemblId"
            href="https://gnomad.broadinstitute.org/gene/{{ gene.xref.ensemblId }}"
            target="_blank"
          >
            <button mat-button color="primary">
              <mat-icon class="mr-1 icon-18px">open_in_new</mat-icon>
              More on gnomAD
            </button>
          </a>
        </div>

        <!-- gnomAD variant -->
        <div class="col-12 mt-3" *ngIf="variant" [@toggle]>
          <h4 class="mt-0 mb-3">
            Population Allele Frequencies of {{ variantString }} from gnomAD
          </h4>
          <app-gnom-ad [variant]="variant"></app-gnom-ad>
        </div>

        <!-- gnomAD gene -->
        <div class="col-12 mt-3" *ngIf="!geneLoading && gene" [@toggle]>
          <h4 class="mt-0 mb-3">Control Population Summary of {{ gene.symbol }} from gnomAD</h4>
          <app-gnom-ad-gene [gene]="gene"></app-gnom-ad-gene>
        </div>
      </div>
      <!-- gnomAD ends -->

      <!-- DGV starts -->
      <div class="row section mt-5" id="DGV" *ngIf="!geneLoading" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Control Data</h2>
          <app-dgv [variant]="variant" [gene]="gene"></app-dgv>
        </div>
      </div>
      <!-- DGV ends -->

      <!-- DECIPHER Control starts -->
      <div class="row section mt-5" id="DECIPHER-Control" *ngIf="!geneLoading && (variant || gene)" [@toggle]>
        <div class="col-12">
          <h2 class="mb-1 text-uppercase">Control Data</h2>
          <app-decipher [variant]="variant" [gene]="gene"></app-decipher>
        </div>
      </div>
      <!-- DECIPHER Control ends -->

      <!-- DIOPT Ortholog starts -->
      <div class="row section" id="orthologs">
        <div class="col-12 mt-5" *ngIf="!geneLoading && gene && !orthologsLoading" [@toggle]>
          <app-orthologs [gene]="gene" [data]="orthologs"></app-orthologs>
        </div>
      </div>
      <!-- DIOPT Ortholog ends -->

      <div class="row section mt-5" id="expression" *ngIf="!geneLoading && gene" [@toggle]>
        <div class="col-12">
          <app-gtex-boxplot [gene]="gene"></app-gtex-boxplot>
        </div>

        <div class="col-12 mt-5">
          <app-agr-expression [gene]="gene"></app-agr-expression>
        </div>
      </div>

      <!--div class="row section mt-5" id="phenotypes" *ngIf="!geneLoading && gene && !orthologsLoading" [@toggle]>
        <div class="col-12">
          <app-phenotypes [gene]="gene" [orthologs]="orthologs"></app-phenotypes>
        </div>
      </div-->

      <div class="row section mt-5" id="gene-ontology" *ngIf="!geneLoading && gene && !orthologsLoading" [@toggle]>
        <div class="col-12">
          <app-gene-ontology [gene]="gene" [orthologs]="orthologs"></app-gene-ontology>
        </div>
      </div>

      <!-- Pharos starts -->
      <div class="row section mt-5" id="pharos" *ngIf="!geneLoading && gene" [@toggle]>
        <div class="col-12">
          <app-pharos [gene]="gene"></app-pharos>
        </div>
      </div>
      <!-- Pharos Control ends -->


      <!-- Alignment starts -->
      <div class="row section mt-5" id="alignment"  *ngIf="!geneLoading && gene" [@toggle]>
        <div class="col-12">
          <app-diopt-alignment [gene]="gene"></app-diopt-alignment>
        </div>
      </div>
      <!-- Alignment ends -->

    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<app-scroll-top-button
  [right]="sidenavOpened ? '262px' : '84px'"
></app-scroll-top-button>
